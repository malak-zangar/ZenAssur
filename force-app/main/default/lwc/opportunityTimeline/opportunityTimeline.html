<template>
    <template if:true={styledStages}>
        <lightning-card>
            <div class="custom-title">Suivi de ma souscription en cours</div>
            <div class="timeline-container">
                <template for:each={styledStages} for:item="stage">
                    <div key={stage.value} class={stage.classList}>
                        <div class="timeline-icon">{stage.icon}</div>
                        <div class="timeline-title">{stage.label}</div>
                        <div class="timeline-desc">{stage.description}</div>
                    </div>
                </template>
            </div>
            <div class="stage-content">
                <template if:true={isProspecting}>
                    <p>ğŸ“© Nous avons bien reÃ§u votre demande. Merci de dÃ©poser vos documents.</p>
                        <p>â• Vous avez une seule tentative, une fois cliquÃ© sur "Envoyer" vous ne pouvez plus modifier. â•</p> <br/>
                   <p><c-opportunity-file-uploader opportunity-id={opportunityId} onstagechanged={handleStageChanged}></c-opportunity-file-uploader>
                   </p>
                </template>
                <template if:true={isQualification}>
                    <p>ğŸ” Vos documents sont en cours d'analyse par notre Ã©quipe. </p>
                    <p>Vous recevrez votre devis dÃ©s qu'il sera pret.</p>
                </template>
                <template if:true={isProposal}>
                    <p>ğŸ’° Un devis est disponible dans votre espace.</p>
                </template>
                <template if:true={isNegotiation}>
                    <p>ğŸ” Nous examinons vos retours concernant le devis proposÃ©.</p>
                </template>
                <template if:true={isContract}>
                    <p>ğŸ¤ Votre contrat est en prÃ©paration. Vous recevrez un lien de signature.</p>
                </template>
                <template if:true={isClosedWon}>
                    <p>âœ… FÃ©licitations ! Votre contrat est validÃ©. Bienvenue chez ZenAssur âœ¨</p>
                </template>
                <template if:true={isClosedLost}>
                    <p>âŒ Votre souscription nâ€™a pas pu Ãªtre finalisÃ©e.</p>
                </template>
            </div>
            
        </lightning-card>
    </template>
    <template if:false={styledStages}>
        <p>Aucune souscription en cours trouvÃ©e.</p>
    </template>
</template>
